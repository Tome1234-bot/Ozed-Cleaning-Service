<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Book Service - Professional Service Booking</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
    --primary-color: #2a5298;
    --secondary-color: #1e3c72;
    --accent-color: #4d7cff;
    --light-color: #f8f9fa;
    --dark-color: #1a1a2e;
    --success-color: #28a745;
    --danger-color: #dc3545;
    --warning-color: #ffc107;
    --border-radius: 12px;
    --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; padding: 20px; color: var(--dark-color); }
.booking-container { max-width: 900px; margin: 0 auto; background: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow); overflow: hidden; }
.header { background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; padding: 30px; text-align: center; }
.header h1 { font-size: 2.5rem; margin-bottom: 10px; font-weight: 700; }
.header p { font-size: 1.1rem; opacity: 0.9; }
.booking-form { padding: 40px; }
.form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; margin-bottom: 30px; }
.form-group { margin-bottom: 25px; }
.form-group label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--dark-color); font-size: 0.95rem; }
.form-control { width: 100%; padding: 12px 15px; border: 2px solid #e1e5eb; border-radius: var(--border-radius); font-size: 1rem; transition: var(--transition); background: white; }
.form-control:focus { outline: none; border-color: var(--accent-color); box-shadow: 0 0 0 3px rgba(77,124,255,0.1); }
.form-control.error { border-color: var(--danger-color); background: rgba(220,53,69,0.02); }
.error-message, .success-message { font-size: 0.85rem; margin-top: 5px; display: none; }
.error-message { color: var(--danger-color); }
.success-message { color: var(--success-color); }
.service-selection { background: var(--light-color); padding: 30px; border-radius: var(--border-radius); margin-bottom: 30px; }
.service-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
.service-card { background: white; border: 2px solid #e1e5eb; border-radius: var(--border-radius); padding: 20px; cursor: pointer; transition: var(--transition); text-align: center; }
.service-card:hover { transform: translateY(-5px); border-color: var(--accent-color); box-shadow: var(--box-shadow); }
.service-card.active { border-color: var(--primary-color); background: rgba(42,82,152,0.05); }
.service-icon { font-size: 2rem; color: var(--primary-color); margin-bottom: 15px; }
.service-card h3 { font-size: 1.2rem; margin-bottom: 10px; color: var(--dark-color); }
.service-card p { font-size: 0.9rem; color: #666; margin-bottom: 15px; }
.price-tag { background: var(--primary-color); color: white; padding: 8px 15px; border-radius: 20px; font-weight: 600; display: inline-block; }
.subcategory-select { margin-top: 20px; }
.subcategory-select select { width: 100%; padding: 12px 15px; border: 2px solid #e1e5eb; border-radius: var(--border-radius); font-size: 1rem; background: white; cursor: pointer; }
.price-summary { background: linear-gradient(135deg, #2a5298 0%, #1e3c72 100%); color: white; padding: 25px; border-radius: var(--border-radius); margin-bottom: 30px; display: none; }
.price-summary h3 { font-size: 1.5rem; margin-bottom: 20px; text-align: center; }
.price-details { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
.price-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
.price-item.total { font-size: 1.3rem; font-weight: 700; border-top: 2px solid rgba(255,255,255,0.2); padding-top: 15px; margin-top: 10px; }
.form-actions { display: flex; justify-content: space-between; gap: 20px; margin-top: 30px; }
.btn { flex: 1; padding: 15px 30px; border: none; border-radius: var(--border-radius); font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: var(--transition); text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px; }
.btn-primary { background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%); color: white; }
.btn-primary:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(42,82,152,0.2); }
.btn-secondary { background: white; color: var(--primary-color); border: 2px solid var(--primary-color); }
.btn-secondary:hover { background: var(--light-color); }
.btn-success { background: linear-gradient(135deg, var(--success-color) 0%, #218838 100%); color: white; }
.btn-success:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(40,167,69,0.2); }
.form-step { display: none; }
.form-step.active { display: block; }
.step-indicator { display: flex; justify-content: center; margin-bottom: 30px; position: relative; }
.step { display: flex; flex-direction: column; align-items: center; position: relative; z-index: 1; padding: 0 20px; }
.step-number { width: 40px; height: 40px; border-radius: 50%; background: #e1e5eb; color: #666; display: flex; align-items: center; justify-content: center; font-weight: 600; margin-bottom: 10px; transition: var(--transition); }
.step.active .step-number { background: var(--primary-color); color: white; }
.step.completed .step-number { background: var(--success-color); color: white; }
.step-line { position: absolute; top: 20px; left: 0; right: 0; height: 2px; background: #e1e5eb; z-index: 0; }
.step-line-progress { position: absolute; top: 20px; left: 0; height: 2px; background: var(--primary-color); z-index: 1; transition: width 0.3s ease; }
.confirmation { text-align: center; padding: 40px; display:none; }
.confirmation-icon { font-size: 4rem; color: var(--success-color); margin-bottom: 20px; }
.confirmation h2 { font-size: 2rem; margin-bottom: 15px; color: var(--dark-color); }
.confirmation p { font-size: 1.1rem; color: #666; margin-bottom: 30px; line-height: 1.6; }
.booking-details { background: var(--light-color); padding: 25px; border-radius: var(--border-radius); text-align: left; margin: 30px 0; }
.booking-details h4 { font-size: 1.2rem; margin-bottom: 15px; color: var(--dark-color); }
.detail-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid rgba(0,0,0,0.1); }
.detail-item:last-child { border-bottom: none; }
.postal-code-info { background: rgba(77,124,255,0.1); border-left: 4px solid var(--accent-color); padding: 15px; border-radius: var(--border-radius); margin-top: 15px; font-size: 0.9rem; }
.postal-code-info i { color: var(--accent-color); margin-right: 10px; }
.location-services { background: rgba(40,167,69,0.1); border-left: 4px solid var(--success-color); padding: 15px; border-radius: var(--border-radius); margin-top: 15px; font-size: 0.9rem; }
.location-services i { color: var(--success-color); margin-right: 10px; }
.postal-code-wrapper { display: flex; gap: 10px; align-items: flex-start; }
.postal-code-wrapper .form-control { flex: 1; }
.postal-code-wrapper .btn { flex: 0 0 auto; padding: 12px 20px; white-space: nowrap; }
@media (max-width: 768px) {
    .booking-form { padding: 20px; }
    .form-grid { grid-template-columns: 1fr; }
    .service-grid { grid-template-columns: 1fr; }
    .form-actions { flex-direction: column; }
    .header h1 { font-size: 2rem; }
    .postal-code-wrapper { flex-direction: column; }
    .postal-code-wrapper .btn { width: 100%; }
}
</style>
</head>
<body>
<div class="booking-container">
<div class="header">
<h1>Book Your Service</h1>
<p>Professional services at your convenience</p>
</div>

<div class="step-indicator">
<div class="step-line"></div>
<div class="step-line-progress" id="stepProgress"></div>
<div class="step active" data-step="1"><div class="step-number">1</div><span>Service</span></div>
<div class="step" data-step="2"><div class="step-number">2</div><span>Location</span></div>
<div class="step" data-step="3"><div class="step-number">3</div><span>Details</span></div>
<div class="step" data-step="4"><div class="step-number">4</div><span>Confirm</span></div>
</div>

<form id="bookingForm" class="booking-form">
<!-- STEP 1: SERVICE -->
<div class="form-step active" data-step="1">
<div class="service-selection">
<h3>Select a Service</h3>
<div class="service-grid" id="serviceGrid"></div>
<div class="subcategory-select">
<select id="subcategorySelect">
<option value="">Select Subcategory</option>
</select>
</div>
</div>
<div class="form-actions">
<button type="button" class="btn btn-primary next-step" data-next="2">Next <i class="fas fa-arrow-right"></i></button>
</div>
</div>

<!-- STEP 2: LOCATION -->
<div class="form-step" data-step="2">
<div class="form-grid">
<div class="form-group">
<label for="postalCode">Postal Code</label>
<div class="postal-code-wrapper">
<input type="text" id="postalCode" class="form-control" placeholder="e.g., 10001">
<button type="button" class="btn btn-primary" id="verifyPostal">Verify</button>
</div>
<div class="error-message" id="postalError">Invalid Postal Code</div>
<div class="success-message" id="postalSuccess">Postal Code Verified!</div>
<div class="postal-code-info" id="postalInfo"></div>
</div>
</div>
<div class="form-actions">
<button type="button" class="btn btn-secondary prev-step" data-prev="1"><i class="fas fa-arrow-left"></i> Previous</button>
<button type="button" class="btn btn-primary next-step" data-next="3">Next <i class="fas fa-arrow-right"></i></button>
</div>
</div>

<!-- STEP 3: DETAILS -->
<div class="form-step" data-step="3">
<div class="form-grid">
<div class="form-group">
<label for="fullName">Full Name</label>
<input type="text" id="fullName" class="form-control" placeholder="Your Name">
<div class="error-message" id="nameError">Required</div>
</div>
<div class="form-group">
<label for="email">Email</label>
<input type="email" id="email" class="form-control" placeholder="you@example.com">
<div class="error-message" id="emailError">Invalid Email</div>
</div>
</div>
<div class="price-summary" id="priceSummary">
<h3>Price Summary</h3>
<div class="price-details" id="priceDetails"></div>
</div>
<div class="form-actions">
<button type="button" class="btn btn-secondary prev-step" data-prev="2"><i class="fas fa-arrow-left"></i> Previous</button>
<button type="button" class="btn btn-primary next-step" data-next="4">Next <i class="fas fa-arrow-right"></i></button>
</div>
</div>

<!-- STEP 4: CONFIRMATION -->
<div class="form-step" data-step="4">
<div class="confirmation" id="confirmation">
<div class="confirmation-icon"><i class="fas fa-check-circle"></i></div>
<h2>Booking Confirmed!</h2>
<p>Thank you for booking your service. Below are your booking details:</p>
<div class="booking-details" id="bookingDetails"></div>
</div>
<div class="form-actions">
<button type="button" class="btn btn-secondary prev-step" data-prev="3"><i class="fas fa-arrow-left"></i> Previous</button>
<button type="submit" class="btn btn-success">Finish <i class="fas fa-check"></i></button>
</div>
</div>
</form>
</div>


<script>
const bookingState = {
    selectedCategory: null,
    selectedSubcategory: null,
    postalCode: '',
    fullName: '',
    email: ''
};

// ----- MOCK SERVICE DATA -----
const services = [
    {
        id: 1,
        name: "Cleaning",
        desc: "House & Office Cleaning",
        icon: "fa-broom",
        subcategories: [
            { name: "Basic Cleaning", price: 50 },
            { name: "Deep Cleaning", price: 100 }
        ]
    },
    {
        id: 2,
        name: "Plumbing",
        desc: "Fix leaks & installations",
        icon: "fa-wrench",
        subcategories: [
            { name: "Minor Repair", price: 30 },
            { name: "Major Repair", price: 80 }
        ]
    },
    {
        id: 3,
        name: "Electrical",
        desc: "Wiring & repairs",
        icon: "fa-bolt",
        subcategories: [
            { name: "Basic Fix", price: 40 },
            { name: "Advanced Work", price: 90 }
        ]
    }
];

// ----- ELEMENTS -----
const serviceGrid = document.getElementById('serviceGrid');
const subcategorySelect = document.getElementById('subcategorySelect');
const priceSummary = document.getElementById('priceSummary');
const priceDetails = document.getElementById('priceDetails');

const postalInput = document.getElementById('postalCode');
const postalError = document.getElementById('postalError');
const postalSuccess = document.getElementById('postalSuccess');
const postalInfo = document.getElementById('postalInfo');

const bookingDetails = document.getElementById('bookingDetails');
const confirmation = document.getElementById('confirmation');

const formSteps = document.querySelectorAll('.form-step');
const steps = document.querySelectorAll('.step');
const stepProgress = document.getElementById('stepProgress');

// ----- RENDER SERVICES -----
function renderServiceCards() {
    serviceGrid.innerHTML = '';

    services.forEach(service => {
        const card = document.createElement('div');
        card.className = 'service-card';

        card.innerHTML = `
            <div class="service-icon">
                <i class="fas ${service.icon}"></i>
            </div>
            <h3>${service.name}</h3>
            <p>${service.desc}</p>
            <span class="price-tag">$${service.subcategories[0].price}</span>
        `;

        card.addEventListener('click', () => {
            bookingState.selectedCategory = service;
            bookingState.selectedSubcategory = service.subcategories[0];

            document.querySelectorAll('.service-card')
                .forEach(c => c.classList.remove('active'));

            card.classList.add('active');

            populateSubcategories(service);
            updatePriceSummary();
        });

        serviceGrid.appendChild(card);
    });
}

// ----- SUBCATEGORIES -----
function populateSubcategories(service) {
    subcategorySelect.innerHTML =
        '<option value="">Select Subcategory</option>';

    service.subcategories.forEach((sub, index) => {
        const opt = document.createElement('option');
        opt.value = index;
        opt.textContent = `${sub.name} ($${sub.price})`;
        subcategorySelect.appendChild(opt);
    });
}

subcategorySelect.addEventListener('change', () => {
    if (!bookingState.selectedCategory) return;

    const idx = parseInt(subcategorySelect.value, 10);

    bookingState.selectedSubcategory =
        bookingState.selectedCategory.subcategories[idx];

    updatePriceSummary();
});

// ----- PRICE SUMMARY -----
function updatePriceSummary() {
    if (!bookingState.selectedCategory) {
        priceSummary.style.display = 'none';
        return;
    }

    const base = 20;
    const servicePrice = bookingState.selectedSubcategory
        ? bookingState.selectedSubcategory.price
        : 0;

    priceDetails.innerHTML = `
        <div class="price-item">
            <span>Base Fee:</span>
            <span>$${base}</span>
        </div>

        ${bookingState.selectedSubcategory ? `
        <div class="price-item">
            <span>${bookingState.selectedSubcategory.name}:</span>
            <span>$${servicePrice}</span>
        </div>` : ''}

        <div class="price-item total">
            <span>Total:</span>
            <span>$${base + servicePrice}</span>
        </div>
    `;

    priceSummary.style.display = 'block';
}

// ----- POSTAL CODE VALIDATION -----
function validatePostal(code) {
    const us = /^\d{5}$/;
    const uk = /^[A-Z]{1,2}\d[A-Z\d]? ?\d[A-Z]{2}$/i;
    const ca = /^[A-Z]\d[A-Z] ?\d[A-Z]\d$/i;

    return us.test(code) || uk.test(code) || ca.test(code);
}

document.getElementById('verifyPostal').addEventListener('click', () => {
    const code = postalInput.value.trim();

    postalError.style.display = 'none';
    postalSuccess.style.display = 'none';

    if (!validatePostal(code)) {
        postalError.style.display = 'block';
        return;
    }

    bookingState.postalCode = code;

    postalSuccess.style.display = 'block';

    postalInfo.innerHTML = `
        <i class="fas fa-map-marker-alt"></i>
        Service available in your area
    `;
});

// ----- STEP NAVIGATION -----
function goToStep(step) {
    formSteps.forEach(s => s.classList.remove('active'));
    document.querySelector(`.form-step[data-step="${step}"]`)
        .classList.add('active');

    updateIndicator(step);
}

function updateIndicator(current) {
    steps.forEach(step => {
        const num = parseInt(step.dataset.step, 10);
        step.classList.remove('active', 'completed');

        if (num < current) step.classList.add('completed');
        if (num === current) step.classList.add('active');
    });

    const percent = ((current - 1) / (steps.length - 1)) * 100;
    stepProgress.style.width = percent + '%';
}

function validateStep(step) {
    if (step === 1 && !bookingState.selectedCategory) {
        alert('Please select a service');
        return false;
    }

    if (step === 2 && !bookingState.postalCode) {
        alert('Please verify postal code');
        return false;
    }

    if (step === 3) {
        const name = document.getElementById('fullName').value.trim();
        const email = document.getElementById('email').value.trim();

        if (!name) {
            document.getElementById('nameError').style.display = 'block';
            return false;
        }

        if (!email.includes('@')) {
            document.getElementById('emailError').style.display = 'block';
            return false;
        }

        bookingState.fullName = name;
        bookingState.email = email;
    }

    return true;
}

// Next buttons
document.querySelectorAll('.next-step').forEach(btn => {
    btn.addEventListener('click', e => {
        const next =
            parseInt(e.target.closest('.next-step').dataset.next, 10);

        if (validateStep(next - 1)) {
            goToStep(next);
        }
    });
});

// Prev buttons
document.querySelectorAll('.prev-step').forEach(btn => {
    btn.addEventListener('click', e => {
        const prev =
            parseInt(e.target.closest('.prev-step').dataset.prev, 10);

        goToStep(prev);
    });
});

// ----- FINAL SUBMIT -----
document.getElementById('bookingForm')
.addEventListener('submit', e => {
    e.preventDefault();

    confirmation.style.display = 'block';

    bookingDetails.innerHTML = `
        <h4>Booking Information</h4>

        <div class="detail-item">
            <span>Name</span>
            <span>${bookingState.fullName}</span>
        </div>

        <div class="detail-item">
            <span>Email</span>
            <span>${bookingState.email}</span>
        </div>

        <div class="detail-item">
            <span>Service</span>
            <span>${bookingState.selectedCategory.name}</span>
        </div>

        <div class="detail-item">
            <span>Package</span>
            <span>${bookingState.selectedSubcategory.name}</span>
        </div>

        <div class="detail-item">
            <span>Postal Code</span>
            <span>${bookingState.postalCode}</span>
        </div>
    `;
});

// ----- INIT -----
renderServiceCards();
</script>

</body>
</html>